<!DOCTYPE html>
<html>
  <head>
    <title>Calling a POST API</title>
  </head>
  <body>
    <h1>Calling a POST API</h1>
    <p>The API is called every 5 minutes and the returned value is updated.</p>
    <script>
      let mtm = 0;
      const callApi = () => {
        // Make a POST request to the API
        // const response = fetch('https://smartapi-bn8s.onrender.com/run-algo', {
        //   method: 'POST',
        // });
        const response = fetch('http://localhost:5000/run-algo', {
          method: 'POST',
        });

        // Get the response from the API
        response
          .then((response) => response.json())
          .then((data) => {
            // Update the mtm value
            mtm = data.mtm;

            // Update the HTML element with the new value
            document.getElementById('mtm').innerHTML = mtm;
          });
      };
      let interval = setInterval(() => {
        callApi();
      }, 300000); // 5 minutes in milliseconds
      callApi();
    </script>
    <p id="mtm"></p>
  </body>
</html>
